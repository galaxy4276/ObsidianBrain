---
tags: authenication, jwt, http
---
![Untitled](Untitled%2084.png)

# 프런트에서 Token 은 어디에 저장해야할까?

- Local Storage
- React State
- HttpOnly Cookie

아래는 각 방법에 대해 염두해 두어야 할 내용이다.

- **Local Storage 는 Cross-Site Scripting(XSS) Attack 에 의해서 손상될 수 있으므로 세 가지 방법 중 가장 안전하지 않은 방식이다.**
- **react state 에 보관하는 것은 페이지가 새로고침 될 때 마다 react 메모리에 저장된 데이터가 손실되므로 실제 사용 사례로 보기는 어렵다.**
- **HttpOnly 쿠키는 자바스크립트로 접근이 불가능하므로 변조가능성이 발생하지 않아 안전하다.**

# JWT는 세션 관리용으로 사용되어선 안 됨

JWT 자체가 애초에 세션과 함께 사용되도록 고안된 것이 아니며, 그러한 방식으로 사용하면 애플리케이션의 보안이 저하될 가능성이 존재한다.

- 공격자가 세션 관리용 토큰을 복제하여 다른사람인 것처럼 가장하기 더 쉬워진다.

JWT는 토큰을 저장하는데 많은 공간과 비용이 필요하므로 요청 당 비용이 많이 들게 된다 따라서 세션 토큰으로 사용하지 않는 것이 좋다.

# 비밀 키는 이렇게 사용하는 것이 안전하다!

JWT의 내용을 복호화 하기 위한 비밀 키는 HMAC 알고리즘과 함께 사용되는 해시함수의 비트 크기와 같아야 한다. ( 즉 짧으면 위험하다. )

## 대칭 서명을 사용하지 말자

대칭 서명을 사용했을 때 모든 당사자가 비밀을 공유해야 하기 때문에 당사자가 점점 늘어날수록 비밀의 안전을 보장하기 어려워진다.

만약 어떤 이유에서 대칭 서명을 이용해야 할 경우 임시 비밀을 사용하면 보안을 강화할 수 있다.

 

결론적으로 JWT는 두 당사자 간 기밀 데이터를 공유할 수 있는 안정적이고 간단한 메커니즘이다.

하지만 **JWT를 사용하는 동안 가장 적합한 방법과 관행을 적용하여 보안을 극대화해야 한다는 점에 항상 유의해야한다!**