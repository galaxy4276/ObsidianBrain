---
tags: websocket, MQTT, gRPC, SSE
---
![[Pasted image 20231127094439.png]]

위 네 가지는 상태 저장 메커니즘이며 각각 서버와 클라이언트 간 메시지를 처리하는 방식이 고유하며 솔루션을 구현하기 전에 고려해야 할 장단점이 있습니다.

> [!상태 저장?]
> 이전 상호 작용을 기억하는 두 엔티티 간 영구적인 연결을 의미합니다.
> 연결이 유지되는 한 두 엔티티는 마치 전화 통화를 하는 것처럼 서로 자유롭게 메세지를 주고받을 수 있으며 한 쪽이 연결을 해제하면 더 이상 서로 통신할 수 없습니다.

이 외에도 연결이 지속적이지는 않고 통신이 단방향인 Amazon SNS 나 [기타 웹훅](https://allenheltondev.medium.com/webhooks-explained-simply-with-car-shopping-1443fb40c445) 같은 상태 비저장 통신 메커니즘도 존재합니다.
이는 지속적인 연결을 유지하거나 이전 상호작용의 메모리를 유지하지 않고 이벤트에 응답하고 구독자에게 알리기 위한 솔루션이므로 상태 저장 메커니즘과 비교하여 적절한 솔루션을 선택해야합니다.

다시 상태 저장 기반으로 돌아와서 각 기술에 대해 간략히 설명하자면..
### 웹소켓
단일 TCP 연결을 통한 양방향 통신입니다.
메시지는 비동기식이며 클라이언트와 서버 서로가 양방향으로 동시에 전송할 수 있습니다.
대부분의 브라우저에서 지원합니다.

### gRPC
고성능 양방향 스트리밍 기술입니다.
웹소켓과 같이 클라이언트와 서버가 양방향으로 통신을 지원할 뿐만 아닌 멀티플렉싱을 제공하므로 여러 메시지를 차단 없이 동시에 단일 방향으로 전송할 수 있습니다.

### Message Queuing Telemetry Transport(MQTT)
최소한의 전력과 패킷량으로 통신하기 위한 프로토콜입니다.
IoT 와 모바일 애플리케이션에서 적합하며 HTTP, TCP 와 같이 클라이언트 -  서버 구조로 동작하는 것이 아닌,
Broker, Publisher, Subscriber 구조로 통신이 이루어집니다.
![[Pasted image 20231127103645.png]]
[MQTT란?](https://medium.com/@jspark141515?source=post_page-----314472c246ee--------------------------------)

### Server Sent Event(SSE)
HTTP를 통해 서버에서 클라이언트로 보내는 간단한 단방향 통신입니다.
주로 브라우저 기반 상호 작용을 위해 고안된 메커니즘이며 자동 연결 및 기본브라우저 지원과 같은 기능을 제공합니다.

# 테스트
서버와 클라이언트 간의 통신을 테스트하는 것은 일반적으로 까다로운 작업이었습니다. 
이벤트를 방출하는 서버 측 워크플로를 구축하고, 클라이언트가 어설션을 수행할 때까지 연결하고 대기하는 사용자 지정 스크립트를 작성해야 했습니다. 
이는 매우 큰 작업이며 코드의 유효성을 검사하는 데 특히 쉬운 방법은 아닙니다. 하지만 개발 작업을 할 때 더 쉽게 테스트할 수 있는 대안을 찾았습니다.

[Postman](https://postman.com/)은 웹소켓, gRPC, MQTT 및 서버 전송 이벤트를 지원합니다. 원하는 경우 Socket.IO에 대한 래퍼도 제공합니다.
![[Pasted image 20231127104258.png]]

# 마치며
실시간 알림을 구현하는데 옮고 그른 명확한 방법은 없으며 다양한 대안만이 존재할 뿐입니다.
비즈니스마다 고유한 요구사항이 있기 때문에 가장 좋은 방법은 직접 여러 사례를 시도해보는 것이며 반복하는 것을 두려워하지 않는 것입니다.
무엇이 적합한 지 확인하고 지연 시간 SLA 을 충족하며 앱 수명 기간 동안 개발자에게 유지 관리 가능한 코드 기반을 제공해야합니다.

# References
[Webhooks Explained Simply… With Car Shopping!](https://allenheltondev.medium.com/webhooks-explained-simply-with-car-shopping-1443fb40c445)
